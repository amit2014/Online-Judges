/* @BEGIN_OF_SOURCE_CODE */
#include <iostream>
#include <string>
#include <vector>
#include <cmath>
using namespace std;
string alpha;
int cc;
bool myfunc(string a, string b)
{
     int i;
     int aa=a.length();
     int bb=b.length();
     int aaa,bbb;
     for(i=0;i<aa && i<bb && a[i]==b[i];i++);
     if(i==aa) return 0;
                     for(int k=0;k<cc;k++)
                     {
                             if(a[i]==alpha[k]) return 1;
                             if(b[i]==alpha[k]) return 0;
                             }
                     if(aaa>bbb) return 0;
                     if(aaa<bbb) return 1;
     return 0;
 }
int main()
{
    int test,len,i,j;
    cin>>test;
    string str[10000];
    cin>>len;
    while(test--)
    {
                 cin>>alpha;
                 cc=alpha.length();
                 if(test!=0)
                 for(i=0;cin>>str[i] && !isdigit(str[i][0]);i++);
                 sort(str,str+i,myfunc);
                 for(j=0;j<i;j++)
                 cout<<str[j]<<endl;
                 if(test!=0) cout<<endl;
                 }
//                 system("pause");
return 0;
}
/* @END_OF_SOURCE_CODE */
